{% extends "base.html" %}
{% block title %}{% i18n "Connections" %}{% endblock %}
{% block content %}
    <div class="row mb-4 align-items-center site-title">
        {% if form.name.errors %}
            <div class="alert alert-danger">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                {% for error in form.name.errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}
        {% if form.hostname.errors %}
            <div class="alert alert-danger">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                {% for error in form.hostname.errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}
        {% if form.login.errors %}
            <div class="alert alert-danger">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                {% for error in form.login.errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}
        {% if form.password.errors %}
            <div class="alert alert-danger">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                {% for error in form.password.errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}
        <div class="col-auto">
            <h1>{% i18n "Connections" %}</h1>
        </div>
        <div class="col">
             <a data-toggle="modal" href="#addHost" class="btn btn-success"><i class="fas fa-plus"></i></a> 
        </div>
    </div>
    <div class="row">
        {% if servers.size %}
            {% for host in servers %}
                {% if host.alive %}
                    {% with "alert-success" as format %}
                        {% include 'servers_server.html' %}
                    {% endwith %}    
                {% else %}    
                    {% with "alert-danger" as format %}
                        {% include 'servers_server.html' %}
                    {% endwith %}   
                {% endif %}
            {% endfor %}
        {% else %}
            <div class="col-sm-12">
                <div class="well">
                    <h4>{% i18n "You have no connection" %}</h4>
                </div>
            </div>
        {% endif %}
    </div>
    <!-- Modal -->
    <div class="modal fade" id="addHost" tabindex="-1" role="dialog" aria-labelledby="addHostLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">{% i18n "Add Connection" %}</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fas fa-times"></i></button>
                </div>
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item"><a class="nav-link active" href="#TCP" data-toggle="tab">{% i18n "TCP Connections" %}</a></li>
                    <li class="nav-item"><a class="nav-link" href="#SSH" data-toggle="tab">{% i18n "SSH Connections" %}</a></li>
                    <li class="nav-item"><a class="nav-link" href="#TLS" data-toggle="tab">{% i18n "TLS Connection" %}</a></li>
                    <li class="nav-item"><a class="nav-link" href="#SOCKET" data-toggle="tab">{% i18n "Local Socket" %}</a></li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane active" id="TCP">
                        <form class="form-horizontal" method="post" role="form">{{ csrf_token }}
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Label" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="name" class="form-control" placeholder="Label Name"
                                           maxlength="20" required pattern="[a-z0-9\.\-_]+">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "FQDN / IP" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="hostname" class="form-control"
                                           placeholder="{% i18n "FQDN or IP Address" %}" required
                                           pattern="[a-z0-9\.\-_]+">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Username" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="login" class="form-control"
                                           placeholder="{% i18n "Username" %}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Password" %}</label>

                                <div class="col-sm-6">
                                    <input type="password" name="password" class="form-control"
                                           placeholder="{% i18n "Password" %}">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">{% i18n "Close" %}</button>
                                <button type="submit" class="btn btn-primary"
                                        name="host_tcp_add">{% i18n "Add" %}</button>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane" id="SSH">
                        <form class="form-horizontal" method="post" role="form">{{ csrf_token }}
                            <p class="modal-body">{% i18n "You must create ssh <a href='https://github.com/retspen/webvirtmgr/wiki/Setup-SSH-Authorization'>authorization key</a>. If you have another SSH port on your server, you can add IP:PORT like '192.168.1.1:2222'." %}</p>

                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Label" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="name" class="form-control" placeholder="Label Name"
                                           maxlength="20" required pattern="[a-z0-9\.\-_]+">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "FQDN / IP" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="hostname" class="form-control"
                                           placeholder="{% i18n "FQDN or IP Address" %}" required
                                           pattern="[a-z0-9\:\.\-_]+">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Username" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="login" class="form-control"
                                           placeholder="{% i18n "Username" %}">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">{% i18n "Close" %}</button>
                                <button type="submit" class="btn btn-primary"
                                        name="host_ssh_add">{% i18n "Add" %}</button>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane" id="TLS">
                        <form class="form-horizontal" method="post" role="form">{{ csrf_token }}
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Label" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="name" class="form-control" placeholder="Label Name"
                                           maxlength="20" required pattern="[a-z0-9\.\-_]+">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "FQDN / IP" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="hostname" class="form-control"
                                           placeholder="{% i18n "FQDN or IP Address" %}" required
                                           pattern="[a-z0-9\.\-_]+">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Username" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="login" class="form-control"
                                           placeholder="{% i18n "Username" %}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Password" %}</label>

                                <div class="col-sm-6">
                                    <input type="password" name="password" class="form-control"
                                           placeholder="{% i18n "Password" %}">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">{% i18n "Close" %}</button>
                                <button type="submit" class="btn btn-primary"
                                        name="host_tls_add">{% i18n "Add" %}</button>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane" id="SOCKET">
                        <form class="form-horizontal" method="post" role="form">{{ csrf_token }}
                            <div class="form-group">
                                <label class="col-sm-4 control-label">{% i18n "Label" %}</label>

                                <div class="col-sm-6">
                                    <input type="text" name="name" class="form-control" placeholder="Label Name"
                                           maxlength="20" required pattern="[a-z0-9\.\-_]+">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default"
                                        data-dismiss="modal">{% i18n "Close" %}</button>
                                <button type="submit" class="btn btn-primary"
                                        name="host_socket_add">{% i18n "Add" %}</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div><!-- /.modal -->
{% endblock %}
